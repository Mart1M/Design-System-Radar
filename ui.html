<!-- ui.html -->
<!DOCTYPE html>
<html>
  <head>
    <!-- Standard link tag-->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* style.css */

      body,
      html {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
      }

      body {
        width: 100%;
        height: auto;
        background-image: url("./assets/BraveM.jpg");
        font-family: "Inter";
      }

      .container {
        max-width: 800px;
        margin: auto;
        padding: 20px;
        text-align: left;
      }

      .tab-content {
        display: none;
      }
    </style>
  </head>

  <body class="bg-white dark:bg-slate-800">
    <div class="container">
      <h1
        class="flex items-center text-3xl font-extrabold dark:text-white mb-4"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          width="32"
          height="32"
          fill="currentColor"
          class="mr-2"
        >
          <path
            d="M4.25705 5.67127L6.39362 7.80783C5.5184 8.97641 5 10.4277 5 12C5 15.866 8.13401 19 12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C10.4277 5 8.97641 5.5184 7.80783 6.39362L5.67127 4.25705C7.39514 2.84637 9.59873 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 9.59873 2.84637 7.39514 4.25705 5.67127ZM7.8284 9.24261L12 13.4142L13.4142 12L9.24261 7.8284C10.033 7.30488 10.9809 7 12 7C14.7614 7 17 9.23858 17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 10.9809 7.30488 10.033 7.8284 9.24261Z"
          ></path>
        </svg>
        Design System Radar
      </h1>

      <button
        type="button"
        id="getDataButton"
        class="text-white bg-indigo-500 hover:bg-indigo-600 focus:ring-4 focus:outline-none focus:ring-indigo-100 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 dark:bg-indigo-500 dark:hover:bg-indigo-500 dark:focus:ring-indigo-100"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          width="20"
          height="20"
          fill="currentColor"
          class="mr-2"
        >
          <path
            d="M5.67127 4.25705L13.4142 12L12 13.4142L8.55382 9.96803C8.20193 10.5635 8 11.2582 8 12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12C16 9.87494 14.3429 8.13693 12.2503 8.00771L10.4459 6.20323C10.9416 6.07067 11.4625 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12C6 10.7042 6.41079 9.50428 7.10925 8.52347L5.68014 7.09436C4.62708 8.44904 4 10.1513 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C10.8915 4 9.83557 4.22547 8.8757 4.63306L7.37443 3.13179C8.75768 2.40883 10.3311 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 8.87842 3.43029 6.09091 5.67127 4.25705Z"
          ></path>
        </svg>
        Scan selection
      </button>
      <p class="mb-3 text-gray-500 dark:text-gray-400 text-sm mt-2">
        Scan your interfaces to make them Design System compliant
      </p>

      <div class="border-b border-gray-200 dark:border-gray-700">
        <ul
          class="flex flex-wrap -mb-px text-sm font-medium text-center text-gray-500 dark:text-gray-400"
        >
          <li class="me-2">
            <button
              onclick="openTab(event, 'Instances')"
              id="tabInstances"
              class="tab-button inline-flex items-center justify-center p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-500 dark:hover:text-gray-300 group"
            >
              <svg
                width="16"
                height="16"
                fill="none"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
                class="w-4 h-4 me-2"
              >
                <rect
                  x="12"
                  y="1.88388"
                  width="14.75"
                  height="14.75"
                  transform="rotate(45 12 1.88388)"
                  stroke="currentColor"
                  stroke-width="1.25"
                /></svg
              >Instances
              <span
                id="instancesCount"
                class="ml-1 text-xs font-medium me-2 px-2 py-0.5 font-semibold text-indigo-600 bg-indigo-100 dark:bg-indigo-500 border border-transparent dark:text-white rounded-full"
                >0</span
              >
            </button>
          </li>
          <li class="me-2">
            <button
              onclick="openTab(event, 'Variables')"
              id="tabVariablesButton"
              class="tab-button inline-flex items-center justify-center p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-500 dark:hover:text-gray-300 group"
            >
              <svg
                width="20"
                height="16"
                viewBox="0 0 20 16"
                xmlns="http://www.w3.org/2000/svg"
                class="w-4 h-4 me-2"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M6.8936 1.59903L1.37872 4.79986V11.1988L6.8936 14.3996L12.4085 11.1988V4.79986L6.8936 1.59764V1.59903ZM13.7872 3.99896L6.8936 0L0 3.99896V11.9997L6.8936 16L13.7872 11.9997V3.99896ZM17.9234 11.1988L11.0298 15.1991L12.4085 16L19.3021 11.9997V3.99896L12.4085 0L11.0298 0.799515L17.9234 4.79986V11.1988ZM8.27232 7.99931C8.27232 8.76418 7.65465 9.38495 6.8936 9.38495C6.13255 9.38495 5.51488 8.76418 5.51488 7.99931C5.51488 7.23443 6.13255 6.61367 6.8936 6.61367C7.65465 6.61367 8.27232 7.23443 8.27232 7.99931Z"
                  fill="currentColor"
                />
              </svg>
              Variables
              <span
                id="variablesCount"
                class="bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300 border border-red-400 ml-1 text-xs font-medium me-2 px-2 py-0.5 font-semibold rounded-full"
                >0</span
              >
            </button>
          </li>
          <li class="me-2">
            <button
              onclick="openTab(event, 'Dimension')"
              class="tab-button inline-flex items-center justify-center p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-500 dark:hover:text-gray-300 group"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="currentColor"
                class="w-4 h-4 me-2"
              >
                <path
                  d="M17 19H19V14H10V5H5V7H7V9H5V11H8V13H5V15H7V17H5V19H7V17H9V19H11V16H13V19H15V17H17V19ZM12 12H20C20.5523 12 21 12.4477 21 13V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H11C11.5523 3 12 3.44772 12 4V12Z"
                ></path>
              </svg>
              Dimensions
              <span
                id="dimensionCount"
                class="border border-red-400 bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300 ml-1 text-xs font-medium me-2 px-2 py-0.5 font-semibold rounded-full"
                >0</span
              >
            </button>
          </li>
        </ul>
      </div>

      <div id="Instances" class="tab-content">
        <div class="table-container">
          <div class="relative overflow-x-auto mt-2">
            <caption
              class="p-5 text-lg text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800"
            >
              <strong class="font-semibold dark:text-slate-100"
                >Instances checker:</strong
              >
              <p
                class="mt-1 text-sm font-normal text-gray-500 dark:text-gray-400"
              >
                List of instances in the selection
              </p>
            </caption>
            <table
              id="dataList"
              class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400 mt-2"
            >
              <thead
                class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"
              >
                <tr>
                  <th scope="col" class="px-6 py-3">Instance name</th>
                  <th scope="col" class="px-6 py-3">
                    Design system component?
                  </th>
                </tr>
              </thead>
              <tbody>
                <!-- Les données seront injectées ici -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div id="Variables" class="tab-content">
        <div class="relative overflow-x-auto mt-2">
          <div id="styleAnalysisResult">
            <div
              class="max-w-sm p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow dark:bg-slate-800 dark:border-slate-700"
            >
              <svg
                class="w-6 h-6 text-gray-800 dark:text-white mb-3"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 19 19"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M11.013 7.962a3.519 3.519 0 0 0-4.975 0l-3.554 3.554a3.518 3.518 0 0 0 4.975 4.975l.461-.46m-.461-4.515a3.518 3.518 0 0 0 4.975 0l3.553-3.554a3.518 3.518 0 0 0-4.974-4.975L10.3 3.7"
                />
              </svg>
              <p class="mb-2 font-normal text-gray-500 dark:text-gray-400">
                Linked variables:
              </p>
              <span id="percentageBound"></span>
            </div>
            <caption
              class="p-5 text-lg font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800"
            >
              <strong class="font-semibold dark:text-slate-100"
                >Nodes with unbounded variables:</strong
              >
              <p
                class="mt-1 text-sm font-normal text-gray-500 dark:text-gray-400"
              >
                List of unbounded variables in your selection
              </p>
            </caption>

            <div class="relative overflow-x-auto mt-2">
              <table
                class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"
              >
                <thead
                  class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"
                >
                  <tr>
                    <th scope="col" class="px-6 py-3">Node</th>
                    <th scope="col" class="px-6 py-3">Preview</th>
                  </tr>
                </thead>
                <tbody id="listUnboundNodes"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div id="Dimension" class="tab-content">
        <div class="relative overflow-x-auto mt-2">
          <caption
            class="p-5 text-lg font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800"
          >
            <strong class="font-semibold dark:text-slate-100"
              >Dimensions</strong
            >
            <p
              class="mt-1 text-sm font-normal text-gray-500 dark:text-gray-400"
            >
              You must bind correct units for spacing.
            </p>
          </caption>
          <div class="relative overflow-x-auto mt-2">
            <table
              class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"
              id="dimensionTable"
            >
              <thead
                class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"
              >
                <tr>
                  <th scope="col" class="px-6 py-3">Frame Name</th>
                  <th scope="col" class="px-6 py-3">Prop</th>
                  <th scope="col" class="px-6 py-3">Spacing</th>
                </tr>
              </thead>
              <tbody id="dimensionsList"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <script>
      function openTab(evt, tabName) {
        var i, tabcontent, tabbuttons;

        // Cacher tout le contenu des onglets
        tabcontent = document.getElementsByClassName("tab-content");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }

        // Retirer les classes actives et ajouter les classes de base à tous les boutons des onglets
        tabbuttons = document.getElementsByClassName("tab-button");
        for (i = 0; i < tabbuttons.length; i++) {
          tabbuttons[i].classList.remove(
            "text-indigo-600",
            "border-indigo-600",
            "active",
            "dark:text-[#F1BBCD]",
            "dark:border-indigo-600"
          );
          tabbuttons[i].classList.add(
            "border-transparent",
            "hover:text-gray-600",
            "hover:border-gray-500",
            "dark:hover:text-gray-300"
          );
        }

        // Afficher le contenu de l'onglet actuel
        document.getElementById(tabName).style.display = "block";

        // Ajouter les classes actives à l'onglet actuellement sélectionné
        evt.currentTarget.classList.add(
          "text-indigo-600",
          "border-indigo-600",
          "active",
          "dark:text-[#F1BBCD]",
          "dark:border-indigo-600"
        );
        evt.currentTarget.classList.remove(
          "border-transparent",
          "hover:text-gray-600",
          "hover:border-gray-500",
          "dark:hover:text-gray-300"
        );
      }

      // Définir l'onglet par défaut ouvert
      document.getElementById("Instances").click();

      const dataList = document.getElementById("dataList");
      const getDataButton = document.getElementById("getDataButton");

      getDataButton.onclick = () => {
        openTabEvent("Instances");
        dataList.innerHTML = `<tr>
                                  <th scope="col" class="px-6 py-3">Instance name</th>
                                  <th scope="col" class="px-6 py-3">Design system component?</th>
                                </tr>`;
        parent.postMessage(
          {
            pluginMessage: {
              type: "get-data",
            },
          },
          "*"
        );
        parent.postMessage(
          {
            pluginMessage: {
              type: "analyze-selection",
            },
          },
          "*"
        );
        parent.postMessage(
          { pluginMessage: { type: "analyze-dimensions" } },
          "*"
        );
      };

      function openTabEvent(tabName) {
        var tabButton = document.getElementById("tab" + tabName);
        if (tabButton) {
          tabButton.click();
        }
      }

      window.onmessage = (event) => {
        const message = event.data.pluginMessage;
        if (message.type === "instance-data") {
          let rows = "";
          message.data.forEach(({ instanceName, hasRoad, instanceId }) => {
            rows += `<tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
                        <td class="px-6 py-4"><a href="#" class="instance-link font-medium hover:underline" data-id="${instanceId}">${instanceName}</a></td>
                        <td class="px-6 py-4">${
                          hasRoad
                            ? `<svg class="w-3 h-3 text-green-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 12">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5.917 5.724 10.5 15 1.5"/>
                </svg>`
                            : `<svg class="w-3 h-3 text-red-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                </svg>`
                        }</td>
                     </tr>`;
          });
          dataList.innerHTML = `<thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                                  <tr>
                                      <th scope="col" class="px-6 py-3">Instance name</th>
                                      <th scope="col" class="px-6 py-3">Design system component?</th>
                                  </tr>
                              </thead>
                              <tbody>${rows}</tbody>`;
          const instancesCountElement =
            document.getElementById("instancesCount");
          instancesCountElement.textContent = message.data.length.toString();
        }
        if (message.type === "style-analysis-result") {
          updateUIWithAnalysisResults(message.data);
        }
        if (message.type === "dimension-analysis-result") {
          updateDimensionsUI(message.data);
        }
      };

      // Écouteur d'événements pour les liens d'instance
      document.addEventListener("click", function (event) {
        if (event.target.classList.contains("instance-link")) {
          event.preventDefault();
          const instanceId = event.target.getAttribute("data-id");
          parent.postMessage(
            {
              pluginMessage: {
                type: "navigate-to-instance",
                instanceId,
              },
            },
            "*"
          );
        }
        if (event.target.classList.contains("unbound-node-link")) {
          event.preventDefault();
          const nodeId = event.target.dataset.id;
          parent.postMessage(
            {
              pluginMessage: {
                type: "navigate-to-node",
                nodeId,
              },
            },
            "*"
          );
        }
        if (event.target.classList.contains("dimension-link")) {
          event.preventDefault();
          const nodeId = event.target.dataset.id;
          parent.postMessage(
            {
              pluginMessage: {
                type: "navigate-to-node",
                nodeId,
              },
            },
            "*"
          );
        }
      });

      function updateDimensionsUI(dimensionNodes) {
        const dimensionsList = document.getElementById("dimensionsList");
        const dimensionCountElement = document.getElementById("dimensionCount");

        if (!dimensionsList || !dimensionCountElement) {
          console.error("Necessary elements not found in the DOM");
          return;
        }
        // Mettre à jour le compteur de dimensions
        dimensionCountElement.textContent = dimensionNodes.length.toString();

        // Vérifier si le nombre de nœuds est égal à 0
        if (dimensionNodes.length === 0) {
          dimensionsList.innerHTML = `<div class="py-2 rounded-lg">
            <p class="text-sm text-gray-500 dark:text-gray-400">
              <span class="bg-green-100 text-green-800 text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded dark:bg-gray-700 dark:text-green-400 border border-green-400">
                <svg class="w-2.5 h-2.5 me-1.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 12">
                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5.917 5.724 10.5 15 1.5"/>
                </svg>
                All dimensions are correct
                </span>
            </p>
        </div>
      `;
          dimensionCountElement.textContent = "Correct";
          dimensionCountElement.classList.add(
            "bg-green-100",
            "text-green-800",
            "dark:bg-green-900",
            "dark:text-green-300",
            "border-green-400"
          );
        } else {
          dimensionsList.innerHTML = "";
          dimensionCountElement.classList.remove(
            "bg-green-100",
            "text-green-800",
            "dark:bg-green-900",
            "dark:text-green-300",
            "border-green-400"
          );

          // Construire et afficher le tableau avec les nœuds
          dimensionNodes.forEach((node) => {
            const row = document.createElement("tr");
            row.classList.add(
              "bg-white",
              "border-b",
              "dark:bg-gray-800",
              "dark:border-gray-700"
            );

            // Cellule pour le nom du nœud
            const nameCell = document.createElement("td");
            nameCell.classList.add("px-6", "py-4");
            const link = document.createElement("a");
            link.href = "#";
            link.textContent = node.name;
            link.classList.add(
              "dimension-link",
              "font-medium",
              "hover:underline"
            );
            link.dataset.id = node.id;
            nameCell.appendChild(link);
            row.appendChild(nameCell);

            //Cellule pour le type de propriété d'espacement
            const propCell = document.createElement("td");
            propCell.classList.add("px-6", "py-4");
            propCell.textContent = node.spacingProp;
            row.appendChild(propCell);
            // Cellule pour l'espacement
            const spacingCell = document.createElement("td");
            spacingCell.classList.add("px-6", "py-4");
            const spacingData = document.createElement("span");
            spacingData.classList.add(
              "bg-gray-100",
              "text-gray-800",
              "text-sm",
              "font-medium",
              "me-2",
              "px-2.5",
              "py-0.5",
              "rounded",
              "dark:bg-gray-700",
              "dark:text-gray-300"
            );
            spacingData.textContent = node.spacing + " px";
            spacingCell.appendChild(spacingData);
            row.appendChild(spacingCell);

            // Ajouter la ligne complète au tableau
            dimensionsList.appendChild(row);
          });
        }
      }

      function updateUIWithAnalysisResults(data) {
        // Décomposer les données reçues
        const { totalNodes, boundNodes, unboundNodes } = data;

        // Calculer le pourcentage de nœuds liés à une variable
        const percentageBound =
          totalNodes > 0 ? (boundNodes / totalNodes) * 100 : 0;
        const percentageElement = document.getElementById("percentageBound");

        percentageElement.textContent = `${percentageBound.toFixed(2)}%`;

        // Attribuer une nouvelle classe en fonction du pourcentage
        if (percentageBound >= 80) {
          percentageElement.classList.add(
            "bg-green-100",
            "text-green-800",
            "text-md",
            "font-bold",
            "me-2",
            "px-2.5",
            "py-0.5",
            "rounded",
            "dark:bg-gray-700",
            "dark:text-green-400",
            "border",
            "border-green-400"
          );
        } else if (percentageBound >= 60) {
          percentageElement.classList.add(
            "bg-lime-100",
            "text-lime-800",
            "text-md",
            "font-bold",
            "me-2",
            "px-2.5",
            "py-0.5",
            "rounded",
            "dark:bg-gray-700",
            "dark:text-lime-400",
            "border",
            "border-lime-400"
          );
        } else if (percentageBound >= 40) {
          percentageElement.classList.add(
            "bg-yellow-100",
            "text-yellow-800",
            "text-md",
            "font-bold",
            "me-2",
            "px-2.5",
            "py-0.5",
            "rounded",
            "dark:bg-gray-700",
            "dark:text-yellow-400",
            "border",
            "border-yellow-400"
          );
        } else if (percentageBound >= 20) {
          percentageElement.classList.add(
            "bg-amber-100",
            "text-amber-800",
            "text-md",
            "font-bold",
            "me-2",
            "px-2.5",
            "py-0.5",
            "rounded",
            "dark:bg-gray-700",
            "dark:text-amber-400",
            "border",
            "border-amber-400"
          );
        } else {
          percentageElement.classList.add(
            "bg-red-100",
            "text-red-800",
            "text-md",
            "font-bold",
            "me-2",
            "px-2.5",
            "py-0.5",
            "rounded",
            "dark:bg-gray-700",
            "dark:text-red-400",
            "border",
            "border-red-400"
          );
          percentageElement.classList.remove(
            "bg-lime-100",
            "text-lime-800",
            "dark:bg-gray-700",
            "dark:text-lime-400",
            "border-lime-400"
          );
        }

        // Mettre à jour la liste des nœuds non liés
        const listUnboundNodes = document.getElementById("listUnboundNodes");
        listUnboundNodes.innerHTML = "";
        unboundNodes.forEach((node) => {
          // Créer une nouvelle ligne de tableau
          const row = document.createElement("tr");
          row.classList.add(
            "bg-white",
            "border-b",
            "dark:bg-gray-800",
            "dark:border-gray-700"
          );

          // Créer une cellule pour le nom du nœud et ajouter le lien
          const nameCell = document.createElement("td");
          nameCell.classList.add("px-6", "py-4");
          const link = document.createElement("a");
          link.href = "#";
          link.textContent = node.name;
          link.classList.add(
            "unbound-node-link",
            "font-medium",
            "hover:underline"
          );
          link.dataset.id = node.id;
          nameCell.appendChild(link);

          // Créer une cellule pour l'aperçu de la couleur
          const colorCell = document.createElement("td");
          colorCell.classList.add("px-6", "py-4");
          const colorSquare = document.createElement("div");
          colorSquare.style.width = "20px";
          colorSquare.style.height = "20px";
          colorSquare.style.backgroundColor = node.color;
          colorSquare.classList.add(
            "rounded-sm",
            "border",
            "border-slate-200",
            "dark:border-slate-600"
          );
          colorCell.appendChild(colorSquare);

          row.appendChild(nameCell);
          row.appendChild(colorCell);

          listUnboundNodes.appendChild(row);
        });

        const variablesCountElement = document.getElementById("variablesCount");
        variablesCountElement.textContent = unboundNodes.length.toString();
        if (unboundNodes.length === 0) {
          variablesCountElement.textContent = "Correct";
          variablesCountElement.classList.add(
            "bg-green-100",
            "text-green-800",
            "dark:bg-green-900",
            "dark:text-green-300",
            "border-green-400"
          );
        } else {
          variablesCountElement.classList.remove(
            "bg-green-100",
            "text-green-800",
            "dark:bg-green-900",
            "dark:text-green-300",
            "border-green-400"
          );
        }
      }
    </script>
  </body>
</html>
